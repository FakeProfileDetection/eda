<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url(https://themes.googleusercontent.com/fonts/css?kit=XGMkxXUZTA64h2imyzu79g);.lst-kix_x7qcpg91d7a-7>li{counter-increment:lst-ctn-kix_x7qcpg91d7a-7}ol.lst-kix_x7qcpg91d7a-8.start{counter-reset:lst-ctn-kix_x7qcpg91d7a-8 0}.lst-kix_x7qcpg91d7a-4>li{counter-increment:lst-ctn-kix_x7qcpg91d7a-4}ol.lst-kix_x7qcpg91d7a-3.start{counter-reset:lst-ctn-kix_x7qcpg91d7a-3 0}ol.lst-kix_x7qcpg91d7a-4.start{counter-reset:lst-ctn-kix_x7qcpg91d7a-4 0}ul.lst-kix_x7qcpg91d7a-1{list-style-type:none}ol.lst-kix_x7qcpg91d7a-2{list-style-type:none}.lst-kix_x7qcpg91d7a-8>li:before{content:"" counter(lst-ctn-kix_x7qcpg91d7a-8,lower-roman) ". "}ol.lst-kix_x7qcpg91d7a-4{list-style-type:none}ol.lst-kix_x7qcpg91d7a-6.start{counter-reset:lst-ctn-kix_x7qcpg91d7a-6 0}ol.lst-kix_x7qcpg91d7a-3{list-style-type:none}ol.lst-kix_x7qcpg91d7a-0{list-style-type:none}.lst-kix_x7qcpg91d7a-3>li{counter-increment:lst-ctn-kix_x7qcpg91d7a-3}ol.lst-kix_x7qcpg91d7a-7.start{counter-reset:lst-ctn-kix_x7qcpg91d7a-7 0}.lst-kix_x7qcpg91d7a-0>li{counter-increment:lst-ctn-kix_x7qcpg91d7a-0}ol.lst-kix_x7qcpg91d7a-6{list-style-type:none}ol.lst-kix_x7qcpg91d7a-0.start{counter-reset:lst-ctn-kix_x7qcpg91d7a-0 0}ol.lst-kix_x7qcpg91d7a-5{list-style-type:none}ol.lst-kix_x7qcpg91d7a-2.start{counter-reset:lst-ctn-kix_x7qcpg91d7a-2 0}.lst-kix_x7qcpg91d7a-6>li{counter-increment:lst-ctn-kix_x7qcpg91d7a-6}ol.lst-kix_x7qcpg91d7a-8{list-style-type:none}ol.lst-kix_x7qcpg91d7a-7{list-style-type:none}.lst-kix_x7qcpg91d7a-7>li:before{content:"" counter(lst-ctn-kix_x7qcpg91d7a-7,lower-latin) ". "}.lst-kix_x7qcpg91d7a-5>li:before{content:"" counter(lst-ctn-kix_x7qcpg91d7a-5,lower-roman) ". "}.lst-kix_x7qcpg91d7a-6>li:before{content:"" counter(lst-ctn-kix_x7qcpg91d7a-6,decimal) ". "}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}.lst-kix_x7qcpg91d7a-3>li:before{content:"" counter(lst-ctn-kix_x7qcpg91d7a-3,decimal) ". "}.lst-kix_x7qcpg91d7a-4>li:before{content:"" counter(lst-ctn-kix_x7qcpg91d7a-4,lower-latin) ". "}.lst-kix_x7qcpg91d7a-5>li{counter-increment:lst-ctn-kix_x7qcpg91d7a-5}.lst-kix_x7qcpg91d7a-2>li{counter-increment:lst-ctn-kix_x7qcpg91d7a-2}.lst-kix_x7qcpg91d7a-0>li:before{content:"" counter(lst-ctn-kix_x7qcpg91d7a-0,decimal) ". "}.lst-kix_x7qcpg91d7a-1>li:before{content:"\0025cb   "}.lst-kix_x7qcpg91d7a-2>li:before{content:"" counter(lst-ctn-kix_x7qcpg91d7a-2,lower-roman) ". "}ol.lst-kix_x7qcpg91d7a-5.start{counter-reset:lst-ctn-kix_x7qcpg91d7a-5 0}.lst-kix_x7qcpg91d7a-8>li{counter-increment:lst-ctn-kix_x7qcpg91d7a-8}ol{margin:0;padding:0}table td,table th{padding:0}.c35{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#cfe2f3;border-left-style:solid;border-bottom-width:0pt;width:138pt;border-top-color:#000000;border-bottom-style:solid}.c26{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#efefef;border-left-style:solid;border-bottom-width:0pt;width:200pt;border-top-color:#000000;border-bottom-style:solid}.c28{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#efefef;border-left-style:solid;border-bottom-width:0pt;width:112.5pt;border-top-color:#000000;border-bottom-style:solid}.c7{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#cfe2f3;border-left-style:solid;border-bottom-width:0pt;width:200pt;border-top-color:#000000;border-bottom-style:solid}.c38{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#efefef;border-left-style:solid;border-bottom-width:0pt;width:155.5pt;border-top-color:#000000;border-bottom-style:solid}.c12{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ff0000;border-top-width:0pt;border-right-width:0pt;border-left-color:#ff0000;vertical-align:top;border-right-color:#ff0000;border-left-width:0pt;border-top-style:solid;background-color:#efefef;border-left-style:solid;border-bottom-width:0pt;width:132.9pt;border-top-color:#ff0000;border-bottom-style:solid}.c44{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#cfe2f3;border-left-style:solid;border-bottom-width:0pt;width:138pt;border-top-color:#ff0000;border-bottom-style:solid}.c31{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#cfe2f3;border-left-style:solid;border-bottom-width:0pt;width:132.9pt;border-top-color:#ff0000;border-bottom-style:solid}.c0{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ff0000;border-top-width:0pt;border-right-width:0pt;border-left-color:#ff0000;vertical-align:top;border-right-color:#ff0000;border-left-width:0pt;border-top-style:solid;background-color:#efefef;border-left-style:solid;border-bottom-width:0pt;width:197.1pt;border-top-color:#ff0000;border-bottom-style:solid}.c46{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#cfe2f3;border-left-style:solid;border-bottom-width:0pt;width:132.9pt;border-top-color:#000000;border-bottom-style:solid}.c25{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#cfe2f3;border-left-style:solid;border-bottom-width:0pt;width:197.1pt;border-top-color:#000000;border-bottom-style:solid}.c33{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ff0000;border-top-width:0pt;border-right-width:0pt;border-left-color:#ff0000;vertical-align:top;border-right-color:#ff0000;border-left-width:0pt;border-top-style:solid;background-color:#efefef;border-left-style:solid;border-bottom-width:0pt;width:138pt;border-top-color:#ff0000;border-bottom-style:solid}.c32{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#cfe2f3;border-left-style:solid;border-bottom-width:0pt;width:155.5pt;border-top-color:#000000;border-bottom-style:solid}.c36{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#cfe2f3;border-left-style:solid;border-bottom-width:0pt;width:197.1pt;border-top-color:#ff0000;border-bottom-style:solid}.c5{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#cfe2f3;border-left-style:solid;border-bottom-width:0pt;width:112.5pt;border-top-color:#000000;border-bottom-style:solid}.c19{margin-left:72pt;padding-top:12pt;padding-left:0pt;padding-bottom:12pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c2{margin-left:36pt;padding-top:12pt;padding-left:0pt;padding-bottom:12pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c3{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c17{padding-top:0pt;padding-bottom:3pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:center}.c20{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:26pt;font-family:"Arial";font-style:normal}.c8{color:#b80672;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Roboto Mono";font-style:normal}.c47{color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-style:normal}.c41{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:center}.c27{color:#000000;text-decoration:none;vertical-align:baseline;font-size:13pt;font-family:"Arial";font-style:normal}.c15{padding-top:14pt;padding-bottom:4pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c23{padding-top:12pt;padding-bottom:12pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c13{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c29{color:#000000;text-decoration:none;vertical-align:baseline;font-size:11pt;font-style:normal}.c42{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c43{border-spacing:0;border-collapse:collapse;margin-right:auto}.c6{color:#37474f;font-weight:400;font-family:"Roboto Mono"}.c45{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c1{color:#188038;font-weight:400;font-family:"Roboto Mono"}.c9{font-weight:400;font-family:"Roboto Mono"}.c18{font-weight:400;font-family:"Courier New"}.c24{border:1px solid black;margin:5px}.c39{color:#000000;font-size:13pt}.c4{padding:0;margin:0}.c21{height:11pt}.c16{height:25pt}.c10{font-weight:700}.c14{height:39.2pt}.c30{height:136pt}.c11{height:52.8pt}.c34{height:108.2pt}.c22{font-style:italic}.c40{font-family:"Arial"}.c37{height:67pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c45 doc-content"><p class="c17 title" id="h.3oz0fg8vw0kx"><span>Mac </span><span class="c18">gcloud-crc32c was blocked</span><span class="c20">&nbsp;</span></p><p class="c41"><span class="c3">19 May 2025</span></p><p class="c13 c21"><span class="c3"></span></p><p class="c13 c21"><span class="c3"></span></p><p class="c13"><span class="c3">ChatGPT o3</span></p><h3 class="c15" id="h.bk5f9gxi5ko0"><span class="c10 c39">What&rsquo;s happening?</span></h3><p class="c13 c21"><span class="c3"></span></p><table class="c43"><tr class="c14"><td class="c12" colspan="1" rowspan="1"><p class="c41"><span class="c10">Symptom</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c41"><span class="c10">Why it appears</span></p></td><td class="c33" colspan="1" rowspan="1"><p class="c41"><span class="c10">How the two issues are related</span></p></td></tr><tr class="c34"><td class="c31" colspan="1" rowspan="1"><p class="c13"><span class="c10">macOS popup:</span><span>&ldquo;</span><span class="c1">gcloud-crc32c</span><span class="c3">&nbsp;can&rsquo;t be opened because Apple cannot check it for malicious software.&rdquo;</span></p></td><td class="c36" colspan="1" rowspan="1"><p class="c13"><span>Gatekeeper quarantines every executable that isn&rsquo;t </span><span class="c10">notarised</span><span>&nbsp;with Apple. The helper binary </span><span class="c22">gcloud-crc32c</span><span class="c3">&nbsp;(installed as part of Google Cloud SDK via Homebrew Cask) isn&rsquo;t signed/notarised, so macOS blocks it the first time it tries to run.</span></p></td><td class="c44" colspan="1" rowspan="1"><p class="c13"><span>When the helper is blocked, the </span><span class="c1">gcloud</span><span class="c3">&nbsp;CLI can&rsquo;t invoke it to compute a CRC-32C checksum for files you upload/download.</span></p></td></tr><tr class="c30"><td class="c46" colspan="1" rowspan="1"><p class="c13"><span class="c10">Terminal error from your script:</span><span class="c1">ERROR: Source hash q7f3+A== does not match destination hash AAAAAA== &hellip;</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c13"><span class="c1">gcloud storage cp</span><span>&nbsp;compares the object&rsquo;s server-side CRC-32C (</span><span class="c1">q7f3+A==</span><span>) with a client-side CRC-32C. Because </span><span class="c22">gcloud-crc32c</span><span>&nbsp;was blocked, the client hash is </span><span class="c10">all-A&rsquo;s</span><span>&nbsp;(</span><span class="c1">AAAAAA==</span><span class="c3">), a sentinel that means &ldquo;hash not computed.&rdquo; The mismatch makes the copy command exit with an error.</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c13"><span>Direct consequence: the binary that Gatekeeper stopped is exactly the one </span><span class="c1">gcloud</span><span class="c3">&nbsp;needs for hash verification.</span></p></td></tr></table><p class="c13 c21"><span class="c3"></span></p><p class="c13 c21"><span class="c3"></span></p><h3 class="c15" id="h.5quxmm9lb8oq"><span class="c27 c10">Quick ways to unblock the helper binary</span></h3><ol class="c4 lst-kix_x7qcpg91d7a-0 start" start="1"><li class="c2 li-bullet-0"><span class="c29 c10 c40">One-off &ldquo;Open Anyway&rdquo;<br></span></li></ol><ul class="c4 lst-kix_x7qcpg91d7a-1 start"><li class="c19 li-bullet-0"><span>macOS &#10140; </span><span class="c29 c10 c40">System Settings &#9656; Privacy &amp; Security<br></span></li><li class="c19 li-bullet-0"><span>At the bottom you&rsquo;ll see &ldquo;</span><span class="c22">gcloud-crc32c was blocked</span><span>&rdquo; &#10140; </span><span class="c10">Allow Anyway</span><span class="c3">&nbsp;&#10140; try the download again.<br></span></li></ul><ol class="c4 lst-kix_x7qcpg91d7a-0" start="2"><li class="c2 li-bullet-0"><span class="c10">Remove the quarantine attribute</span><span>&nbsp;(safe because the binary is from Homebrew&rsquo;s signed download):<br></span><sup><a href="#cmnt1" id="cmnt_ref1">[a]</a></sup></li></ol><p class="c13"><span>&#60419;</span><span class="c8"># replace the path if your Homebrew prefix differs</span></p><p class="c13"><span class="c6">xattr</span><span class="c9">&nbsp;</span><span class="c6">-d</span><span class="c9">&nbsp;</span><span class="c6">com.apple.quarantine</span><span class="c9">&nbsp;</span><span class="c6">\</span></p><p class="c13"><span class="c9">&nbsp; </span><span class="c1">&quot;$(brew --prefix)/Caskroom/google-cloud-sdk/latest/google-cloud-sdk/bin/gcloud-crc32c&quot;</span></p><ol class="c4 lst-kix_x7qcpg91d7a-0" start="3"><li class="c2 li-bullet-0"><span>&#60418;<br></span><span class="c10">Re-run your script</span><span>. </span><span class="c1">gcloud storage cp</span><span class="c3">&nbsp;should now finish without the hash-mismatch error.<br></span></li></ol><h3 class="c15" id="h.g9sns28ztrqx"><span class="c10 c27">Permanent / team-friendly fixes</span></h3><table class="c43"><tr class="c16"><td class="c28" colspan="1" rowspan="1"><p class="c41"><span class="c10">Option</span></p></td><td class="c26" colspan="1" rowspan="1"><p class="c41"><span class="c10">What to do</span></p></td><td class="c38" colspan="1" rowspan="1"><p class="c41"><span class="c10">Trade-offs</span></p></td></tr><tr class="c11"><td class="c5" colspan="1" rowspan="1"><p class="c13"><span class="c10">Update Google Cloud SDK</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c13"><span class="c1">gcloud components update</span><span>&nbsp;or </span><span class="c1">brew upgrade --cask google-cloud-sdk</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c13"><span class="c3">Newer releases are properly notarised; no manual workarounds needed.</span></p></td></tr><tr class="c37"><td class="c5" colspan="1" rowspan="1"><p class="c13"><span class="c10">Disable hash checking (not recommended)</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c13"><span class="c1">gcloud config set storage/check_hashes never</span><span>&nbsp;or pass </span><span class="c1">--no-check-hash</span><span>&nbsp;to </span><span class="c1">gcloud storage cp</span><span class="c3">.</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c13"><span class="c3">Gets around the issue but removes integrity checking&mdash;only use if you must and you trust the network.</span></p></td></tr><tr class="c11"><td class="c5" colspan="1" rowspan="1"><p class="c13"><span class="c10">Ship an allow-listed copy of the binary</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c13"><span class="c3">Commit a script that clears the quarantine extended attribute during setup (example above).</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c13"><span class="c3">Works offline and keeps hash checks, but still relies on users allowing unsigned code.</span></p></td></tr></table><h3 class="c15" id="h.7hmomm7aao7y"><span class="c27 c10">Why the script itself is fine</span></h3><p class="c23"><span>Your </span><span class="c1">download_data.sh</span><span class="c3">&nbsp;simply calls:</span></p><p class="c13"><span>&#60419;</span><span class="c6">gcloud</span><span class="c9">&nbsp;</span><span class="c6">storage</span><span class="c9">&nbsp;</span><span class="c6">cp</span><span class="c9">&nbsp;</span><span class="c1">&quot;gs://$BUCKET_NAME/$FILE_PATH&quot;</span><span class="c9">&nbsp;</span><span class="c1">&quot;$DEST&quot;</span><span class="c9">&nbsp; &nbsp;</span><span class="c8"># turn0file1</span></p><p class="c23"><span>&#60418;so the failure isn&rsquo;t in the script; it&rsquo;s entirely the local macOS security block that prevents </span><span class="c1">gcloud</span><span class="c3">&nbsp;from computing the checksum it expects.</span></p><p class="c23"><span class="c3">Once the helper binary is un-quarantined (or you update to an SDK build that Apple has notarised), both errors disappear.</span></p><p class="c13 c21"><span class="c3"></span></p><div class="c24"><p class="c42"><a href="#cmnt_ref1" id="cmnt1">[a]</a><span class="c3">Try this.</span></p></div></body></html>